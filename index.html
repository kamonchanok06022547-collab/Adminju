<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>lnwwinlek - üåü‡πÄ‡∏ó‡∏û‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç (ADMIN)üåü</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
/* CSS ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ */
html, body { margin: 0; padding: 0; min-height: 100vh; font-family: "Segoe UI", sans-serif; background: linear-gradient(160deg, #ffe4f0, #d0f0ff); background-attachment: fixed; }
body { display: flex; flex-direction: column; align-items: center; padding: 15px 0; }
.container { text-align: center; max-width: 400px; width: 92%; }
header h1 { font-size: 1.8rem; background: linear-gradient(90deg, #4aa3ff, #ff7ab6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0; text-transform: lowercase; }
header p { font-size: 0.85rem; font-weight: 600; color: #666; margin: 5px 0 10px 0; }

.user-badge { position: fixed; top: 10px; right: 10px; background: rgba(255, 255, 255, 0.7); padding: 4px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; color: #4aa3ff; border: 1px solid rgba(74, 163, 255, 0.3); backdrop-filter: blur(4px); z-index: 100; }
.expiry-info { background: #fff; padding: 8px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: bold; color: #1565c0; box-shadow: 0 4px 10px rgba(0,0,0,0.05); margin: 10px 0; display: inline-block; border: 1px solid #bbdefb; }
.card { background: #fff; border-radius: 15px; padding: 1rem; box-shadow: 0 8px 20px rgba(0,0,0,0.05); margin-bottom: 15px; }
input#inputNumber { width: 85%; padding: 10px; font-size: 1.2rem; text-align: center; border-radius: 12px; border: 2px solid #f0f4f8; outline: none; }
button { cursor: pointer; border: none; font-weight: 600; border-radius: 10px; transition: 0.2s; }
.reset { background: #ff6b6b; color: white; width: 100%; padding: 10px; font-size: 0.9rem; }
#logoutBtn { background: #90a4ae; color: white; padding: 10px 20px; font-size: 0.85rem; margin-top: 10px; width: 100%; border-radius: 12px; }

.result-section { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }
.section { background: #fff; border-radius: 12px; padding: 0.8rem; text-align: center; border: 1px solid rgba(0,0,0,0.03); cursor: pointer; }
.section.full { grid-column: span 2; }
.section strong { display: block; margin-bottom: 5px; color: #ff7ab6; font-size: 0.75rem; border-bottom: 1px solid #fdf2f8; padding-bottom: 4px; }
.result { font-family: 'Consolas', monospace; font-size: 0.85rem; color: #444; word-break: break-all; }

#loginOverlay { position: fixed; inset: 0; background: linear-gradient(135deg, #ffe4f0 0%, #d0f0ff 100%); display: flex; align-items: center; justify-content: center; z-index: 999; }
.login-card { background: white; padding: 2.5rem 1.5rem; border-radius: 30px; width: 85%; max-width: 320px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
.login-btn { width: 100%; padding: 14px; border-radius: 15px; background: linear-gradient(90deg, #4aa3ff, #ff7ab6); color: white; font-size: 1.1rem; margin-top: 15px; }

.dot { height: 9px; width: 9px; border-radius: 50%; display: inline-block; margin-right: 5px; }
.online { background: #4caf50; box-shadow: 0 0 5px #4caf50; } 
.offline { background: #f44336; }
</style>
</head>
<body>

<div id="currentUserBadge" class="user-badge" style="display:none;"></div>

<div id="loginOverlay">
    <div class="login-card">
        <h2 style="margin-bottom: 1.5rem; color: #4aa3ff; font-size: 1.6rem;">Admin System</h2>
        <input id="userName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ)" style="width:90%; padding:12px; margin-bottom:12px; border-radius:12px; border:1px solid #ddd; text-align:center;">
        <input id="userPass" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô" style="width:90%; padding:12px; margin-bottom:15px; border-radius:12px; border:1px solid #ddd; text-align:center;">
        <button class="login-btn" onclick="doLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>
</div>

<div id="main" class="container" style="display:none;">
    <header>
        <h1>lnwwinlek</h1>
        <p>‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡πÇ‡∏î‡∏¢ üåü‡πÄ‡∏ó‡∏û‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Çüåü</p>
        <div id="expiryStatus" class="expiry-info">üëë ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</div>
    </header>

    <div id="adminPanel">
        <div class="card" style="text-align: left;">
            <h4 style="margin:0 0 10px 0; color:#4aa3ff;">üë• ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô None)</h4>
            <table style="width:100%; font-size:0.85rem; border-collapse: collapse;">
                <tbody id="onlineListTableBody"></tbody>
            </table>
        </div>
    </div>

    <div class="card">
        <button id="logoutBtn" onclick="doLogout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</button>
    </div>
</div>

<script>
// --- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase ---
const firebaseConfig = { 
    apiKey: "AIzaSyC1iAT_0vKk6Uew2VJtN3_wx4JszVTTTjY", 
    authDomain: "junior-nior.firebaseapp.com", 
    databaseURL: "https://junior-nior-default-rtdb.asia-southeast1.firebasedatabase.app", 
    projectId: "junior-nior", 
    storageBucket: "junior-nior.firebasestorage.app", 
    messagingSenderId: "225309280850", 
    appId: "1:225309280850:web:49e3f857eb8a4a250a2d8b" 
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const ADMIN_PASS = "adminwinjunior";

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
window.onload = () => {
    // ‡∏î‡∏∂‡∏á‡∏£‡∏´‡∏±‡∏™‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å localStorage ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á Input
    const lastPass = localStorage.getItem("lastAdminUsedPass");
    if(lastPass) {
        document.getElementById("userPass").value = lastPass;
    }

    const myPass = sessionStorage.getItem("myPass");
    const isAdmin = sessionStorage.getItem("isAdmin") === "1";
    
    if(myPass && isAdmin){
        showAdminDashboard(myPass);
    }
};

async function doLogin() {
    const name = document.getElementById("userName").value.trim();
    const pass = document.getElementById("userPass").value.trim();

    if(pass === ADMIN_PASS) {
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏°‡πâ‡∏à‡∏∞ Logout
        localStorage.setItem("lastAdminUsedPass", pass);
        
        sessionStorage.setItem("myPass", pass);
        sessionStorage.setItem("isAdmin", "1");
        showAdminDashboard(pass);
    } else {
        alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!");
    }
}

function showAdminDashboard(pass) {
    document.getElementById("loginOverlay").style.display = "none";
    document.getElementById("main").style.display = "block";
    
    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Real-time
    db.ref('online_users').on('value', (snapshot) => {
        const users = snapshot.val() ? Object.values(snapshot.val()) : [];
        const tbody = document.getElementById("onlineListTableBody");
        tbody.innerHTML = "";
        
        users.forEach(u => { 
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô "None" ‡πÅ‡∏ï‡πà‡πÇ‡∏ä‡∏ß‡πå‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏ô‡∏ß‡∏á‡πÄ‡∏•‡πá‡∏ö
            tbody.innerHTML += `
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding:10px;">
                        <span class="dot ${u.status === 'online' ? 'online' : 'offline'}"></span> 
                        <strong>None</strong> <span style="color:#888;">(${u.pass})</span>
                    </td>
                </tr>`; 
        });
    });
}

function doLogout() {
    // ‡∏•‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÉ‡∏ô‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡πà‡∏ô ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏•‡∏ö localStorage (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏±‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠)
    sessionStorage.clear();
    location.reload();
}

</script>
</body>
</html>
